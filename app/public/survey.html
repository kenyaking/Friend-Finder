<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
</head>
<body>
  <div class="container"> 
   
    <form>
        <div class="form-group mt-3"> 
          <h3>Complete the survey below.</h3>
          <br>
          <h5> Answer on a scale of 1 to 5 with 1 being "Yes definitely" and 5 being "Absolutely not - no way"</h5>
          <br>
          <input type="text" class="form-control" id="name" placeholder="Your name">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" id="photo" placeholder="link to profile photo">
        </div>

        <div class="form-group">
          <label for="Question1">Generally, you enjoy walking in the park and find it relaxing.</label>
          <select class="form-control" id="Question1">
            <option value="empty">Select an option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
        </div>
      
        <div class="form-group">
            <label for="Question2">You enjoy eating in fine restaurants frequently.</label>
            <select class="form-control" id="Question2">
              <option value="empty">Select an option</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div> 

        <div class="form-group">
            <label for="Question3">You like to hang out at bars occassionally.</label>
            <select class="form-control" id="Question3">
                <option value="empty">Select an option</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>

        <div class="form-group">
            <label for="Question4">You love drinking red wine.</label>
            <select class="form-control" id="Question4">
                <option value="empty">Select an option</option>
              <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            </select>
        </div>
      
        <div class="form-group">
            <label for="Question5">You are religious and attend church often.</label>
            <select class="form-control" id="Question5">
            <option value="empty">Select an option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            </select>
        </div> 

        <div class="form-group">
            <label for="Question6"> You get high scores on standardized tests.</label>
            <select class="form-control" id="Question6">
           <option value="empty">Select an option</option>
            <option value="1">1</option>
             <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                </select>
            </div> 

            <div class="form-group">
                    <label for="Question7"> You love children and desire to have serveral.</label>
                    <select class="form-control" id="Question7">
                    <option value="empty">Select an option</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select>
                </div> 

            
            <div class="form-group">
                        <label for="Question8">You have a passion for art and music</label>
                        <select class="form-control" id="Question8">
                         <option value="empty">Select an option</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        </select>
                    </div> 
      
                
            <div class="form-group">
                    <label for="Question9">You often think about investing and financial stability.</label>
                    <select class="form-control" id="Question9">
                    <option value="empty">Select an option</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    </select>
                </div> 
  
                <div class="form-group">
                        <label for="Question10">You are inspired to eat healthy and excercise regularly.</label>
                        <select class="form-control" id="Question10">
                        <option value="empty">Select an option</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        </select>
                    </div> 
      </form>
      <button id="submit" class="btn btn-primary" type="submit">Submit</button>

      <div id="friend" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Your new friend</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h2 id="friendName"></h2>
              <img id="friendPhoto" src="#" style="max-width:100%; height:auto;">
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              
            </div>
          </div>
        </div>
      </div>

    
   </div>
</body>
</html>

<script type="text/javascript">
    $("#submit").on("click", function(event){
        event.preventDefault()

        var newUser = {
            name:$("#name").val(),
            photo:$("#photo").val(),
            scores:[
              parseInt($("#Question1").val(), 10),
              parseInt($("#Question2").val(), 10),
              parseInt($("#Question3").val(), 10),
              parseInt($("#Question4").val(), 10),
              parseInt($("#Question5").val(), 10),
              parseInt($("#Question6").val(), 10),
              parseInt($("#Question7").val(), 10),
              parseInt($("#Question8").val(), 10),
              parseInt($("#Question9").val(), 10),
              parseInt($("#Question10").val(), 10)
            ]       
        }

        $.ajax({
          type: 'POST',
          url: '/api/friends',
          contentType: 'application/json; charset=utf-8',
          data: JSON.stringify(newUser),
          dataType: 'json',
          success: function(data) {
            $("#friendName").text(data.name)
            $("#friendPhoto").attr("src", data.photo)
            $("#friend").modal("toggle")
          }        
        });
    })  
</script>



